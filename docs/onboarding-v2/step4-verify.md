# オンボーディングv2 — Step 4: 検証

## 目的
実装したオンボーディングv2が仕様通りに動作することを検証する。

## 検証タスク

### 1. TypeScript型チェック
```bash
npx tsc --noEmit
```
エラーがあれば修正。

### 2. ビルド確認
```bash
npm run build
```
ビルドエラーがあれば修正。

### 3. 画面遷移フローの検証
以下の3ルートが正しく動作することを確認：

**最短ルート（全スキップ）:**
画面0(アカウント) → 1(年齢) → 2(名前) → 3(発話) → 4(評価歴) → 24(完了)
→ 全てスキップ可能な画面をスキップした場合、完了画面に到達すること

**典型ルート（評価あり）:**
画面0 → 1 → 2 → 3 → 4(はい) → 5(診断選択) → 7-14(認知) → 15-18(社会) → 19-21(運動) → 22-23(特性) → 24(完了)
→ 画面4で「はい」→ 画面5が表示され、画面6はスキップされること

**典型ルート（未診断）:**
画面0 → 1 → 2 → 3 → 4(いいえ) → 6(気になる点) → 7-14 → 15-18 → 19-21 → 22-23 → 24
→ 画面4で「いいえ」→ 画面6が表示され、画面5はスキップされること

### 4. UI品質チェック
以下を目視確認（スクリーンショットがあれば撮影）：

- [ ] 背景が deep-space (#0D0D2B) であること
- [ ] プログレスバーが cosmic (#6C3CE1) で正しく進むこと
- [ ] フェーズラベルがフェーズごとに色が変わること
- [ ] Moguイラストが正しい表情で表示されること
- [ ] Yes/Noボタンが十分な大きさ（48px以上）であること
- [ ] 戻るボタンが動作すること
- [ ] Skipボタンが Phase 2以降でのみ表示されること
- [ ] 複数選択チップが正しくトグルすること
- [ ] 「特にない」選択時に他のチップが解除されること
- [ ] テキスト入力欄が16px以上であること

### 5. データ保存の検証
- [ ] Supabase有効時: 完了画面で保存が実行されること
- [ ] Supabase無効時: ローカル保存にフォールバックすること
- [ ] domainAnswers が正しく蓄積されること
- [ ] 完了後にホーム画面 (/) に遷移すること

### 6. 既存機能への影響確認
- [ ] ホーム画面が正常に表示されること
- [ ] ログイン画面が正常に動作すること
- [ ] ミドルウェアのリダイレクトが正しいこと（未ログイン→/login、未オンボーディング→/onboarding）

## 検証完了後
全て問題なければコミット：
```bash
git add -A && git commit -m "feat: onboarding v2 - 1問1画面スタイルに全面改修"
```

問題があれば修正してから再検証。
