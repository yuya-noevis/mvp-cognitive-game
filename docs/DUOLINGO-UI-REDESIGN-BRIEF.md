# Duolingo風ステージ画面へのUIリデザイン指示書

このドキュメントは、Manasアプリのステージ周りUIを **Duolingoのステージ画面** に近い見た目・仕様に変更するための、Claude（またはAI）への指示として使うためのものです。  
「添付画像（Duolingo風ステージ画面）のようなUI・仕様に変更して」と依頼するときに、このファイルを参照または内容をコピーして渡してください。

---

## 1. 参考にするもの

- **参考**: Duolingoのステージ画面（モバイル）
- **対象**: 当プロジェクトの「ステージ画面」および関連UI
  - ステージマップを表示する画面: `src/app/(game)/select/page.tsx`（ステージタブ時）
  - ステージマップコンポーネント: `src/components/stage/StageMap.tsx`
  - ステージプレイ中のスケジュールバー: `src/components/stage/VisualSchedule.tsx`
  - ステージプレイページ: `src/app/(game)/stage/[stageId]/page.tsx`
  - デザイントークン: `src/app/globals.css`

---

## 2. 全体のビジュアル・トーン

- **ダークモードベース**: 背景は濃いグレー〜黒。明るいクリーム背景ではなく、Duolingoのように暗い背景で統一する。
- **ゲーミフィケーション**: ストリーク（連続日数）、ゲーム内通貨（ジェム）、ライフ（ハート）など、進捗・報酬が一目で分かる要素を上部に配置する。
- **鮮やかなアクセント**: アクティブなノード・ボタン・アイコンは、ターコイズグリーン、イエロー、ブルー、ピンクなど鮮やかでコントラストの効いた色を使う。
- **シンプルでモダン**: フラット寄り＋ボタンに軽い立体感。子ども向けだが「安っぽい」にならない品質感を目指す。

---

## 3. レイアウト・構成（Duolingoに合わせる）

### 3.1 トップのステータスバー（新規追加を想定）

画面上部に、以下のような要素を横並びで表示する。

| 要素 | 説明 | 実装のヒント |
|------|------|----------------|
| リーグ/実績 | 緑の四角＋王冠アイコン等（数値は任意） | 仮で固定表示でも可 |
| ストリーク | 炎アイコン＋連続学習日数（例: 0） | 状態管理がなければ「0」でOK |
| ジェム/ポイント | 青い六角形の宝石アイコン＋数値（例: 640） | ゲーム内通貨・報酬のイメージ。通知ドット（赤）を付けてもよい |
| ライフ/体力 | ピンクの稲妻またはハート＋数値（例: 25） | ライフ制や「今日の残りプレイ回数」などに紐づけ可能 |

- 背景はダークテーマに合わせる（例: 表面色を `--color-surface-dark` などで定義）。
- アイコンは既存の `src/components/icons/` を流用・拡張し、不足分はSVGで追加。

### 3.2 メインエリア：セクション・ユニットバナー（ステージ選択画面で使用）

- **現在のセクション・ユニット**を、画面上部中央に角丸の**明るいターコイズグリーン（またはアクセント色）のバナー**で表示する。
- 例: 「セクション2・ユニット1」「駒の価値と有利な取り」のような2行構成。
- 当プロジェクトでは「セクション＝ステージグループ」「ユニット＝現在のステージ」などに置き換えてよい（例: 「ステージ2」「注意力と抑制」など）。

### 3.3 ステージパス（学習パス）

- **縦方向のパス**で、上から下へ進む形にする（既存の `StageMap` は縦なので方向は活かす）。
- **ノードの種類**:
  - **通常ステージ**: 円形ボタン。太い枠線＋塗り。完了時はゴールドまたはドメイン色、現在はアクティブ色（ターコイズグリーン等）、未解除は薄いグレー。
  - **星アイコン**: ステージノードの中央に白い星を表示するスタイルを採用（Duolingoと同様）。
  - **宝箱**: 報酬ステージやチェックポイント用に、円形以外の「宝箱」アイコンノードを混ぜてもよい。
  - **ダンベル**: 復習・強化用ステージとしてダンベルアイコンのノードを入れてもよい。
- **ロック/アンロック**:
  - 未解除ノードは薄いグレーの円＋暗いグレーの星（または鍵アイコン）でロック表現。
  - ノード同士は縦の**接続線**でつなぎ、完了した区間はアクセント色、未完了はグレー。
- **現在地**: 現在のステージノードは少し大きめ（例: scale 1.1）、軽いパルスやシャドウでフォーカスを強調。
- **背景イラスト**: 余裕があれば、パスの横に薄いグレーのイラスト（キャラやテーマに合わせたもの）を置くとDuolingoに近くなる。必須ではない。

### 3.4 下部ナビゲーションバー（新規追加を想定）

- 画面最下部に **5つのアイコン** を横並び。
  - **ホーム（選択中）**: 家アイコン。選択時は水色の丸い四角で囲むなどして強調。
  - **スキル/レッスン**: スキルやレッスン一覧への導線。
  - **ショップ/ストア**: 宝箱アイコン（ジェム消費など）。
  - **プロフィール/ソーシャル**: 吹き出し＋ハートなど。
  - **その他/設定**: 三点リーダーや歯車。
- 選択中タブは色・背景で明確に区別する。
- 当プロジェクトのルート構造に合わせて、各アイコンを `/select`（ステージ/ホーム）、`/parent/settings` など既存ルートにマッピングしてよい。

---

## 4. カラー・テーマ（ダークベース）

- **背景**: メイン背景を `#1a1a1a` や `#2d2d2d` などのダークに。`globals.css` に `[data-theme="dark"]` または `.duolingo-style` 用の変数を追加し、ステージ周りで適用する。
- **表面**: カードやバーは `#3d3d3d` 前後の少し明るいグレー。
- **アクティブ/完了**: ターコイズグリーン `#58CC02` に近い色、ゴールド `#FFC800`、青 `#1CB0F6`、ピンク `#FF4B4B` などをアクセントとして使用。
- **テキスト**: 白またはオフホワイトを基本に、補助テキストはグレー。
- 既存の「感覚過敏モード」「ハイコントラスト」用変数は残しつつ、デフォルトをDuolingo風ダークに切り替えるか、テーマ切替で選べるようにする。

---

## 5. コンポーネント・ファイルごとの変更イメージ

| 対象 | 変更内容 |
|------|----------|
| `src/app/globals.css` | ダークテーマ用のCSS変数（背景・表面・ボーダー・アクセント）を追加。必要なら `[data-theme="dark"]` で切り替え。 |
| `src/components/stage/StageMap.tsx` | ノードを「円形＋星アイコン」中心のDuolingo風に。宝箱・ダンベルノードの種類を追加可能。接続線・ロック・現在地のスタイルをダーク＋鮮やかアクセントに。 |
| `src/app/(game)/select/page.tsx` | ステージタブ時、上部に「セクション・ユニット」バナーを表示。全体をダークテーマのラッパーで包む。下部にグローバルナビを追加（または共通レイアウトに）。 |
| `src/app/(game)/stage/[stageId]/page.tsx` | プレイ中もダーク背景を維持。上部にストリーク・ジェム・ライフのミニバーを出してもよい。 |
| 新規: トップステータスバー | ストリーク・ジェム・ライフ（＋任意でリーグ）を表示するコンポーネント。`(game)` レイアウトに組み込む。 |
| 新規: 下部ナビゲーション | 5アイコン（ホーム・スキル・ショップ・プロフィール・その他）。`(game)` の共通レイアウトに配置。 |
| `src/components/stage/VisualSchedule.tsx` | プレイ中のゲーム並びを、ダーク背景・鮮やかなノード色に合わせて調整。 |

---

## 6. 仕様・UXの合わせ方

- **ステージの解除条件**: 前のステージをクリアすると次がアンロックされる流れはそのまま。Duolingoのように「パスを上から下に進む」一本のパスとして見せる。
- **マスタリー・星**: 既存の習熟度（マスタリーレベル）や星3つ評価は、ノードにゴールドや星アイコンで表現する形で維持してよい。
- **言語**: 日本語のまま。「セクション2・ユニット1」は「ステージ2」「ユニット1」など、用語をプロジェクトに合わせてよい。
- **アクセシビリティ**: 既存のタップターゲットサイズ（48px以上）や、`prefers-reduced-motion` への配慮は維持する。

---

## 7. 依頼時のコピペ用（短い指示）

```
ステージ画面のUIを、添付のDuolingo風ステージ画面のように変更してほしい。

具体的な仕様・レイアウト・色・コンポーネントの変更点は、リポジトリ内の
docs/DUOLINGO-UI-REDESIGN-BRIEF.md に書いた。このファイルを読んで、
そこに書いてある「トップステータスバー」「セクション・ユニットバナー」
「ステージパス（円形ノード＋星/宝箱/ダンベル）」「下部5つナビ」「ダークテーマ」
を実装し、StageMap・selectページ・stageページ・VisualSchedule を
Duolingo風にリデザインしてほしい。
```

---

## 8. 補足

- まずは **ステージ選択画面（StageMap が表示される画面）** と **ステージプレイ中の全体トーン** をDuolingoに寄せることを最優先にするとよい。
- トップバー（ストリーク・ジェム・ライフ）や下部ナビは、一旦モックデータ・仮ルートで実装し、後から状態管理やルーティングを実装してもよい。
- 既存の「感覚過敏」「ハイコントラスト」オプションは残すことを推奨する（テーマ切替でライト/ダークを選べる形でも可）。
