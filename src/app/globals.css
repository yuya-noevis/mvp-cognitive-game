@import "tailwindcss";

/*
 * Manas Design System — Duolingo ABC Style
 *
 * カラーパレット: Duolingo ABCのブライトグリーン/ブルーを基調
 * 安全設計: 赤色禁止、Xマーク(否定)禁止、ポジティブフィードバックのみ
 * WCAG 2.1 AA準拠 (4.5:1以上)
 */

:root {
  /* === Base Palette (Duolingo ABC) === */
  --color-bg: #F7F7F7;
  --color-bg-warm: #FFFFFF;
  --color-surface: #FFFFFF;
  --color-surface-hover: #F0F0F0;
  --color-border: #E5E5E5;
  --color-border-light: #EEEEEE;

  /* === Primary (Duo Green — bright, energetic) === */
  --color-primary: #58CC02;
  --color-primary-light: #7DD836;
  --color-primary-dark: #46A302;
  --color-primary-bg: rgba(88, 204, 2, 0.12);

  /* === Accent (Duo Blue — friendly, trustworthy) === */
  --color-accent: #1CB0F6;
  --color-accent-light: #4DC4F8;
  --color-accent-bg: rgba(28, 176, 246, 0.12);

  /* === Text (soft dark — not pure black) === */
  --color-text: #4B4B4B;
  --color-text-secondary: #777777;
  --color-text-muted: #AFAFAF;
  --color-text-on-primary: #FFFFFF;

  /* === Feedback (no red - safety design) === */
  --color-success: #58CC02;
  --color-success-bg: rgba(88, 204, 2, 0.12);
  --color-warning: #FFC800;
  --color-warning-bg: rgba(255, 200, 0, 0.12);
  --color-info: #1CB0F6;
  --color-info-bg: rgba(28, 176, 246, 0.12);

  /* === 15 Cognitive Domain Colors === */
  --color-domain-attention: #64B5F6;
  --color-domain-inhibition: #E8866A;
  --color-domain-working-memory: #9B8EC8;
  --color-domain-memory: #F0B429;
  --color-domain-processing-speed: #4AADA4;
  --color-domain-cognitive-flexibility: #E091A3;
  --color-domain-planning: #6BCB77;
  --color-domain-reasoning: #7986CB;
  --color-domain-problem-solving: #FFB347;
  --color-domain-visuospatial: #CE93D8;
  --color-domain-perceptual: #4DD0E1;
  --color-domain-language: #F48FB1;
  --color-domain-social-cognition: #FFAB91;
  --color-domain-emotion-regulation: #B39DDB;
  --color-domain-motor-skills: #AED581;

  /* === Spacing & Sizing === */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* === Duo ABC Tokens === */
  --duo-green: #58CC02;
  --duo-green-dark: #46A302;
  --duo-blue: #1CB0F6;
  --duo-pink: #FF4B82;
  --duo-orange: #FF9600;
  --duo-gold: #FFC800;
  --duo-ground: #808080;
  --duo-ground-light: #999999;

  /* Sky colors (overridden per level via inline style) */
  --duo-sky-top: #4EC5F1;
  --duo-sky-bottom: #7DD6F5;

  /* Stage path (dark brown) */
  --duo-path-bg: #4A3728;
  --duo-path-pattern: rgba(0,0,0,0.12);
  --duo-node-locked: rgba(70, 50, 35, 0.7);
  --duo-node-locked-icon: rgba(70, 50, 35, 0.9);
  --duo-connector-dots: rgba(70, 50, 35, 0.5);

  /* Library (dark) */
  --duo-library-bg: #3C2A1E;

  /* === Spacing & Sizing === */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* === Animation (safe defaults) === */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* === Sensory-Reduced Mode (感覚過敏対応 — desaturated Duo palette) === */
[data-sensory="reduced"] {
  --color-bg: #F0F0F0;
  --color-bg-warm: #F5F5F5;
  --color-primary: #7DB85A;
  --color-primary-light: #9ACA7A;
  --color-primary-dark: #5E8F42;
  --color-accent: #6BA8C8;
  --color-success: #7DB85A;
  --color-warning: #D4B574;
  --duration-fast: 200ms;
  --duration-normal: 500ms;
  --duration-slow: 800ms;
}

/* === Duolingo ABC-style Theme (backward-compat; now matches :root) === */
[data-theme="duo"] {
  /* All values now match :root — kept for existing data-theme="duo" references */
}

/* Cloud float animations */
@keyframes cloudDrift {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(15px); }
}
@keyframes cloudDriftSlow {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(-10px); }
}
.animate-cloud-drift { animation: cloudDrift 10s ease-in-out infinite; }
.animate-cloud-drift-slow { animation: cloudDriftSlow 14s ease-in-out infinite; }

/* Crosshatch pattern for stage path background */
.duo-crosshatch {
  background-image:
    linear-gradient(45deg, var(--duo-path-pattern, rgba(0,0,0,0.08)) 25%, transparent 25%),
    linear-gradient(-45deg, var(--duo-path-pattern, rgba(0,0,0,0.08)) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--duo-path-pattern, rgba(0,0,0,0.08)) 75%),
    linear-gradient(-45deg, transparent 75%, var(--duo-path-pattern, rgba(0,0,0,0.08)) 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
}

/* === High Contrast Mode === */
[data-contrast="high"] {
  --color-bg: #FFFFFF;
  --color-text: #000000;
  --color-text-secondary: #1A1A1A;
  --color-border: #333333;
  --color-primary: #006B64;
  --color-primary-dark: #004D47;
}

/* === Safe animation - respects user preferences === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* === Base Body === */
body {
  background-color: var(--color-bg);
  color: var(--color-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* === Tap targets: WCAG 2.1 AA (44px) / AAA for children (80px) === */
.tap-target {
  min-width: 48px;
  min-height: 48px;
  touch-action: manipulation;
}

.tap-target-large {
  min-width: 80px;
  min-height: 80px;
  touch-action: manipulation;
}

/* === Keyframe Animations === */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes gentlePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes gentleBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes celebrateStars {
  0% { opacity: 0; transform: scale(0) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
  100% { opacity: 0; transform: scale(0.8) rotate(360deg); }
}

/* === Engaging Interaction Animations === */

@keyframes tapBounce {
  0% { transform: scale(1); }
  30% { transform: scale(0.92); }
  60% { transform: scale(1.05); }
  80% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

@keyframes popIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { opacity: 1; transform: scale(1.1); }
  70% { transform: scale(0.95); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  15% { transform: rotate(-6deg); }
  30% { transform: rotate(5deg); }
  45% { transform: rotate(-4deg); }
  60% { transform: rotate(3deg); }
  75% { transform: rotate(-2deg); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes successPop {
  0% { transform: scale(1); }
  15% { transform: scale(1.15); }
  30% { transform: scale(0.95); }
  45% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes confettiBurst {
  0% { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
  100% { opacity: 0; transform: translateY(-60px) rotate(360deg) scale(0.3); }
}

@keyframes mascotJump {
  0%, 100% { transform: translateY(0); }
  30% { transform: translateY(-12px); }
  50% { transform: translateY(-8px); }
}

@keyframes mascotWave {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-3px) rotate(-3deg); }
  75% { transform: translateY(-3px) rotate(3deg); }
}

@keyframes mascotArmWave {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-20deg); }
  75% { transform: rotate(20deg); }
}

@keyframes breathe {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

@keyframes progressGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(88, 204, 2, 0.3); }
  50% { box-shadow: 0 0 12px rgba(88, 204, 2, 0.6); }
}

@keyframes iconSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-fade-in { animation: fadeIn var(--duration-normal) var(--ease-out) both; }
.animate-fade-in-up { animation: fadeInUp var(--duration-normal) var(--ease-out) both; }
.animate-scale-in { animation: scaleIn var(--duration-normal) var(--ease-bounce) both; }
.animate-gentle-pulse { animation: gentlePulse 2s ease-in-out infinite; }
.animate-gentle-bounce { animation: gentleBounce 1.5s ease-in-out infinite; }
.animate-float { animation: float 3s ease-in-out infinite; }
.animate-tap-bounce { animation: tapBounce 0.4s var(--ease-bounce) both; }
.animate-pop-in { animation: popIn 0.5s var(--ease-bounce) both; }
.animate-wiggle { animation: wiggle 0.6s ease-in-out; }
.animate-slide-in-right { animation: slideInRight var(--duration-normal) var(--ease-out) both; }
.animate-slide-in-left { animation: slideInLeft var(--duration-normal) var(--ease-out) both; }
.animate-success-pop { animation: successPop 0.5s var(--ease-bounce) both; }
.animate-mascot-jump { animation: mascotJump 0.8s var(--ease-bounce) both; }
.animate-mascot-wave { animation: mascotWave 2s ease-in-out infinite; }
.animate-mascot-arm-wave { animation: mascotArmWave 0.8s ease-in-out infinite; }
.animate-breathe { animation: breathe 3s ease-in-out infinite; }
.animate-progress-glow { animation: progressGlow 2s ease-in-out infinite; }

/* Staggered entrance animations */
.stagger-1 { animation-delay: 50ms; }
.stagger-2 { animation-delay: 100ms; }
.stagger-3 { animation-delay: 150ms; }
.stagger-4 { animation-delay: 200ms; }
.stagger-5 { animation-delay: 250ms; }
.stagger-6 { animation-delay: 300ms; }

/* === Card style === */
.card {
  background: var(--color-surface);
  border-radius: var(--radius-xl);
  border: 1px solid var(--color-border-light);
  box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 12px rgba(0,0,0,0.02);
}

.card-hover {
  transition: transform var(--duration-fast) var(--ease-out),
              box-shadow var(--duration-fast) var(--ease-out),
              border-color var(--duration-fast) var(--ease-out);
}
.card-hover:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.06), 0 8px 24px rgba(0,0,0,0.04);
  border-color: var(--color-primary-light);
}
.card-hover:active {
  transform: scale(0.97);
}

/* === Progress bar === */
.progress-bar {
  height: 8px;
  border-radius: var(--radius-full);
  background: var(--color-border-light);
  overflow: hidden;
}
.progress-bar-fill {
  height: 100%;
  border-radius: var(--radius-full);
  transition: width 0.8s var(--ease-out);
}

/* === Gauge (circular progress) === */
.gauge-ring {
  fill: none;
  stroke-linecap: round;
  transition: stroke-dashoffset 1s var(--ease-out);
}

/* === Toggle switch === */
.toggle {
  width: 52px;
  height: 28px;
  border-radius: var(--radius-full);
  padding: 2px;
  transition: background-color var(--duration-fast) var(--ease-out);
  cursor: pointer;
}
.toggle[data-on="true"] { background-color: var(--color-primary); }
.toggle[data-on="false"] { background-color: var(--color-border); }
.toggle-knob {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  transition: transform var(--duration-fast) var(--ease-bounce);
}
.toggle[data-on="true"] .toggle-knob { transform: translateX(24px); }
.toggle[data-on="false"] .toggle-knob { transform: translateX(0); }

/* === Button base === */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  border-radius: var(--radius-lg);
  transition: all var(--duration-fast) var(--ease-out);
  touch-action: manipulation;
}
.btn:active { transform: scale(0.96); }
.btn-primary {
  background: var(--color-primary);
  color: var(--color-text-on-primary);
  box-shadow: 0 4px 0 var(--color-primary-dark);
}
.btn-primary:hover { background: var(--color-primary-light); }
.btn-primary:active { box-shadow: 0 1px 0 var(--color-primary-dark); transform: translateY(3px); }
.btn-soft {
  background: var(--color-primary-bg);
  color: var(--color-primary-dark);
}
.btn-soft:hover { background: var(--color-primary-light); color: white; }

/* Duo ABC 3D Green Button */
.btn-duo-green {
  background: #58CC02;
  color: white;
  font-weight: 700;
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 0 #46A302, 0 6px 12px rgba(0,0,0,0.1);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-duo-green:active {
  box-shadow: 0 1px 0 #46A302;
  transform: translateY(3px);
}

/* Duo ABC 3D Blue Button */
.btn-duo-blue {
  background: #1CB0F6;
  color: white;
  font-weight: 700;
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 0 #1898D4, 0 6px 12px rgba(0,0,0,0.1);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-duo-blue:active {
  box-shadow: 0 1px 0 #1898D4;
  transform: translateY(3px);
}

/* === Interactive tap feedback === */
.tap-interactive {
  transition: transform var(--duration-fast) var(--ease-bounce);
  cursor: pointer;
}
.tap-interactive:active {
  animation: tapBounce 0.4s var(--ease-bounce);
}

/* Card with bounce interaction */
.card-bounce:active {
  animation: tapBounce 0.3s var(--ease-bounce);
}

/* Game choice button with pop effect */
.choice-btn {
  transition: all var(--duration-fast) var(--ease-out);
}
.choice-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
}
.choice-btn:active {
  animation: tapBounce 0.3s var(--ease-bounce);
}
.choice-btn.correct {
  animation: successPop 0.5s var(--ease-bounce);
}

/* Streak fire animation */
.streak-fire {
  animation: breathe 2s ease-in-out infinite;
}

/* Mascot speech bubble entrance */
.speech-enter {
  animation: popIn 0.4s var(--ease-bounce) both;
}
