@import "tailwindcss";

/*
 * Manas Design System — Cosmic Space Theme
 *
 * テーマ: 宇宙・星の冒険
 * 安全設計: 赤色禁止（子供向け）、ポジティブフィードバックのみ
 * WCAG 2.1 AA準拠 (4.5:1以上)
 */

/* === Tailwind v4 Theme Tokens === */
@theme {
  --color-cosmic: #6C3CE1;
  --color-cosmic-light: #8B5CF6;
  --color-cosmic-dark: #5B2CC9;
  --color-nebula: #FF6B9D;
  --color-nebula-light: #FF8FB3;
  --color-star: #FFD43B;
  --color-star-light: #FFE066;
  --color-galaxy: #1A1A40;
  --color-galaxy-light: #2A2A5A;
  --color-deep-space: #0D0D2B;
  --color-comet: #4ECDC4;
  --color-comet-light: #7EDDD6;
  --color-stardust: #F0F0FF;
  --color-moon: #B8B8D0;
  --color-supernova: #FF4757;
  --color-aurora: #2ED573;
}

:root {
  /* === Cosmic Palette === */
  --color-bg: #0D0D2B;
  --color-bg-warm: #1A1A40;
  --color-surface: #2A2A5A;
  --color-surface-hover: #3A3A6A;
  --color-border: #3A3A6A;
  --color-border-light: #4A4A7A;

  /* === Primary (Cosmic Purple) === */
  --color-primary: #6C3CE1;
  --color-primary-light: #8B5CF6;
  --color-primary-dark: #5B2CC9;
  --color-primary-bg: rgba(108, 60, 225, 0.15);

  /* === Accent (Comet Cyan) === */
  --color-accent: #4ECDC4;
  --color-accent-light: #7EDDD6;
  --color-accent-bg: rgba(78, 205, 196, 0.15);

  /* === Text === */
  --color-text: #F0F0FF;
  --color-text-secondary: #B8B8D0;
  --color-text-muted: #8888AA;
  --color-text-on-primary: #FFFFFF;

  /* === Feedback (no red for children) === */
  --color-success: #2ED573;
  --color-success-bg: rgba(46, 213, 115, 0.15);
  --color-warning: #FFD43B;
  --color-warning-bg: rgba(255, 212, 59, 0.15);
  --color-info: #4ECDC4;
  --color-info-bg: rgba(78, 205, 196, 0.15);

  /* === 15 Cognitive Domain Colors === */
  --color-domain-attention: #64B5F6;
  --color-domain-inhibition: #E8866A;
  --color-domain-working-memory: #9B8EC8;
  --color-domain-memory: #F0B429;
  --color-domain-processing-speed: #4AADA4;
  --color-domain-cognitive-flexibility: #E091A3;
  --color-domain-planning: #6BCB77;
  --color-domain-reasoning: #7986CB;
  --color-domain-problem-solving: #FFB347;
  --color-domain-visuospatial: #CE93D8;
  --color-domain-perceptual: #4DD0E1;
  --color-domain-language: #F48FB1;
  --color-domain-social-cognition: #FFAB91;
  --color-domain-emotion-regulation: #B39DDB;
  --color-domain-motor-skills: #AED581;

  /* === Spacing & Sizing === */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* === Star System Colors === */
  --star-hikari: #6C3CE1;
  --star-kangae: #4ECDC4;
  --star-kankaku: #2ED573;
  --star-kotoba: #FFD43B;

  /* === Animation (safe defaults) === */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* === Sensory-Reduced Mode === */
[data-sensory="reduced"] {
  --color-bg: #1A1A35;
  --color-bg-warm: #222245;
  --color-primary: #8B6FD0;
  --color-primary-light: #A08FE0;
  --color-primary-dark: #6B5FAF;
  --color-accent: #7DBDB8;
  --color-success: #6DC08A;
  --color-warning: #D4C47A;
  --duration-fast: 200ms;
  --duration-normal: 500ms;
  --duration-slow: 800ms;
}

/* === Parent-facing light theme === */
[data-theme="parent"] {
  --color-bg: #F0F0FF;
  --color-bg-warm: #FFFFFF;
  --color-surface: #FFFFFF;
  --color-surface-hover: #E8E8F8;
  --color-border: #D0D0E8;
  --color-border-light: #E0E0F0;
  --color-text: #2A2A4A;
  --color-text-secondary: #6A6A8A;
  --color-text-muted: #9A9AB8;
}

/* === High Contrast Mode === */
[data-contrast="high"] {
  --color-bg: #000000;
  --color-text: #FFFFFF;
  --color-text-secondary: #E0E0E0;
  --color-border: #FFFFFF;
  --color-primary: #9B6FF0;
  --color-primary-dark: #7B4FD0;
}

/* === Safe animation - respects user preferences === */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* === Base Body === */
body {
  background-color: var(--color-bg);
  color: var(--color-text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* === Tap targets: WCAG 2.1 AA (44px) / AAA for children (56px+) === */
.tap-target {
  min-width: 56px;
  min-height: 56px;
  touch-action: manipulation;
}

.tap-target-large {
  min-width: 80px;
  min-height: 80px;
  touch-action: manipulation;
}

/* === Space Background Utility === */
.bg-space {
  background: linear-gradient(180deg, #0D0D2B 0%, #1A1A40 50%, #2A2A5A 100%);
}

.bg-space-radial {
  background: radial-gradient(ellipse at 50% 30%, #2A2A5A 0%, #1A1A40 40%, #0D0D2B 100%);
}

/* === Keyframe Animations === */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes gentlePulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes gentleBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

@keyframes celebrateStars {
  0% { opacity: 0; transform: scale(0) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
  100% { opacity: 0; transform: scale(0.8) rotate(360deg); }
}

/* === Space-themed animations === */
@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

@keyframes orbit {
  from { transform: rotate(0deg) translateX(20px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(20px) rotate(-360deg); }
}

@keyframes planetFloat {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-6px) rotate(1deg); }
  75% { transform: translateY(4px) rotate(-1deg); }
}

@keyframes cosmicGlow {
  0%, 100% { box-shadow: 0 0 8px rgba(108, 60, 225, 0.3); }
  50% { box-shadow: 0 0 20px rgba(108, 60, 225, 0.6); }
}

@keyframes starBurst {
  0% { opacity: 1; transform: scale(0) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.3) rotate(180deg); }
  100% { opacity: 0; transform: scale(0.5) rotate(360deg); }
}

@keyframes nebulaDrift {
  0%, 100% { transform: translateX(0) translateY(0) scale(1); }
  33% { transform: translateX(10px) translateY(-5px) scale(1.05); }
  66% { transform: translateX(-5px) translateY(3px) scale(0.98); }
}

@keyframes rocketShake {
  0%, 100% { transform: translateX(0) rotate(0deg); }
  25% { transform: translateX(-2px) rotate(-1deg); }
  75% { transform: translateX(2px) rotate(1deg); }
}

/* === Engaging Interaction Animations === */
@keyframes tapBounce {
  0% { transform: scale(1); }
  30% { transform: scale(0.92); }
  60% { transform: scale(1.05); }
  80% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

@keyframes popIn {
  0% { opacity: 0; transform: scale(0.3); }
  50% { opacity: 1; transform: scale(1.1); }
  70% { transform: scale(0.95); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  15% { transform: rotate(-6deg); }
  30% { transform: rotate(5deg); }
  45% { transform: rotate(-4deg); }
  60% { transform: rotate(3deg); }
  75% { transform: rotate(-2deg); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInLeft {
  from { opacity: 0; transform: translateX(-30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes successPop {
  0% { transform: scale(1); }
  15% { transform: scale(1.15); }
  30% { transform: scale(0.95); }
  45% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes confettiBurst {
  0% { opacity: 1; transform: translateY(0) rotate(0deg) scale(1); }
  100% { opacity: 0; transform: translateY(-60px) rotate(360deg) scale(0.3); }
}

@keyframes mascotJump {
  0%, 100% { transform: translateY(0); }
  30% { transform: translateY(-12px); }
  50% { transform: translateY(-8px); }
}

@keyframes mascotWave {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-3px) rotate(-3deg); }
  75% { transform: translateY(-3px) rotate(3deg); }
}

@keyframes mascotArmWave {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-20deg); }
  75% { transform: rotate(20deg); }
}

@keyframes breathe {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

@keyframes progressGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(108, 60, 225, 0.3); }
  50% { box-shadow: 0 0 12px rgba(108, 60, 225, 0.6); }
}

@keyframes iconSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-fade-in { animation: fadeIn var(--duration-normal) var(--ease-out) both; }
.animate-fade-in-up { animation: fadeInUp var(--duration-normal) var(--ease-out) both; }
.animate-scale-in { animation: scaleIn var(--duration-normal) var(--ease-bounce) both; }
.animate-gentle-pulse { animation: gentlePulse 2s ease-in-out infinite; }
.animate-gentle-bounce { animation: gentleBounce 1.5s ease-in-out infinite; }
.animate-float { animation: float 3s ease-in-out infinite; }
.animate-tap-bounce { animation: tapBounce 0.4s var(--ease-bounce) both; }
.animate-pop-in { animation: popIn 0.5s var(--ease-bounce) both; }
.animate-wiggle { animation: wiggle 0.6s ease-in-out; }
.animate-slide-in-right { animation: slideInRight var(--duration-normal) var(--ease-out) both; }
.animate-slide-in-left { animation: slideInLeft var(--duration-normal) var(--ease-out) both; }
.animate-success-pop { animation: successPop 0.5s var(--ease-bounce) both; }
.animate-mascot-jump { animation: mascotJump 0.8s var(--ease-bounce) both; }
.animate-mascot-wave { animation: mascotWave 2s ease-in-out infinite; }
.animate-mascot-arm-wave { animation: mascotArmWave 0.8s ease-in-out infinite; }
.animate-breathe { animation: breathe 3s ease-in-out infinite; }
.animate-progress-glow { animation: progressGlow 2s ease-in-out infinite; }
.animate-twinkle { animation: twinkle 2s ease-in-out infinite; }
.animate-planet-float { animation: planetFloat 6s ease-in-out infinite; }
.animate-cosmic-glow { animation: cosmicGlow 2s ease-in-out infinite; }
.animate-nebula-drift { animation: nebulaDrift 12s ease-in-out infinite; }

/* Staggered entrance animations */
.stagger-1 { animation-delay: 50ms; }
.stagger-2 { animation-delay: 100ms; }
.stagger-3 { animation-delay: 150ms; }
.stagger-4 { animation-delay: 200ms; }
.stagger-5 { animation-delay: 250ms; }
.stagger-6 { animation-delay: 300ms; }

/* === Card style (cosmic glass) === */
.card {
  background: rgba(42, 42, 90, 0.6);
  backdrop-filter: blur(10px);
  border-radius: var(--radius-2xl);
  border: 1px solid rgba(108, 60, 225, 0.2);
  box-shadow: 0 4px 16px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.05);
}

.card-hover {
  transition: transform var(--duration-fast) var(--ease-out),
              box-shadow var(--duration-fast) var(--ease-out),
              border-color var(--duration-fast) var(--ease-out);
}
.card-hover:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(108, 60, 225, 0.2);
  border-color: rgba(108, 60, 225, 0.4);
}
.card-hover:active {
  transform: scale(0.97);
}

/* === Progress bar (cosmic) === */
.progress-bar {
  height: 8px;
  border-radius: var(--radius-full);
  background: rgba(255,255,255,0.1);
  overflow: hidden;
}
.progress-bar-fill {
  height: 100%;
  border-radius: var(--radius-full);
  transition: width 0.8s var(--ease-out);
}

/* === Gauge (circular progress) === */
.gauge-ring {
  fill: none;
  stroke-linecap: round;
  transition: stroke-dashoffset 1s var(--ease-out);
}

/* === Toggle switch === */
.toggle {
  width: 52px;
  height: 28px;
  border-radius: var(--radius-full);
  padding: 2px;
  transition: background-color var(--duration-fast) var(--ease-out);
  cursor: pointer;
}
.toggle[data-on="true"] { background-color: var(--color-primary); }
.toggle[data-on="false"] { background-color: var(--color-border); }
.toggle-knob {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: white;
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  transition: transform var(--duration-fast) var(--ease-bounce);
}
.toggle[data-on="true"] .toggle-knob { transform: translateX(24px); }
.toggle[data-on="false"] .toggle-knob { transform: translateX(0); }

/* === Button base === */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  border-radius: var(--radius-2xl);
  transition: all var(--duration-fast) var(--ease-out);
  touch-action: manipulation;
}
.btn:active { transform: scale(0.96); }

/* Cosmic 3D Primary Button */
.btn-cosmic {
  background: linear-gradient(135deg, #6C3CE1 0%, #8B5CF6 100%);
  color: white;
  font-weight: 700;
  border-radius: var(--radius-2xl);
  box-shadow: 0 4px 0 #5B2CC9, 0 6px 12px rgba(108, 60, 225, 0.3);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-cosmic:active {
  box-shadow: 0 1px 0 #5B2CC9;
  transform: translateY(3px);
}

/* Cosmic 3D Comet Button */
.btn-comet {
  background: linear-gradient(135deg, #4ECDC4 0%, #7EDDD6 100%);
  color: white;
  font-weight: 700;
  border-radius: var(--radius-2xl);
  box-shadow: 0 4px 0 #3ABBB3, 0 6px 12px rgba(78, 205, 196, 0.3);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-comet:active {
  box-shadow: 0 1px 0 #3ABBB3;
  transform: translateY(3px);
}

/* Cosmic 3D Star Button */
.btn-star {
  background: linear-gradient(135deg, #FFD43B 0%, #FFE066 100%);
  color: #1A1A40;
  font-weight: 700;
  border-radius: var(--radius-2xl);
  box-shadow: 0 4px 0 #E6BE35, 0 6px 12px rgba(255, 212, 59, 0.3);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-star:active {
  box-shadow: 0 1px 0 #E6BE35;
  transform: translateY(3px);
}

/* Legacy Duo button aliases (backward compat) */
.btn-duo-green {
  background: linear-gradient(135deg, #6C3CE1 0%, #8B5CF6 100%);
  color: white;
  font-weight: 700;
  border-radius: var(--radius-2xl);
  box-shadow: 0 4px 0 #5B2CC9, 0 6px 12px rgba(108, 60, 225, 0.3);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-duo-green:active {
  box-shadow: 0 1px 0 #5B2CC9;
  transform: translateY(3px);
}
.btn-duo-blue {
  background: linear-gradient(135deg, #4ECDC4 0%, #7EDDD6 100%);
  color: white;
  font-weight: 700;
  border-radius: var(--radius-2xl);
  box-shadow: 0 4px 0 #3ABBB3, 0 6px 12px rgba(78, 205, 196, 0.3);
  transition: all var(--duration-fast) var(--ease-out);
}
.btn-duo-blue:active {
  box-shadow: 0 1px 0 #3ABBB3;
  transform: translateY(3px);
}

/* === Interactive tap feedback === */
.tap-interactive {
  transition: transform var(--duration-fast) var(--ease-bounce);
  cursor: pointer;
}
.tap-interactive:active {
  animation: tapBounce 0.4s var(--ease-bounce);
}

/* Card with bounce interaction */
.card-bounce:active {
  animation: tapBounce 0.3s var(--ease-bounce);
}

/* Game choice button with pop effect */
.choice-btn {
  transition: all var(--duration-fast) var(--ease-out);
}
.choice-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(108, 60, 225, 0.15);
}
.choice-btn:active {
  animation: tapBounce 0.3s var(--ease-bounce);
}
.choice-btn.correct {
  animation: successPop 0.5s var(--ease-bounce);
}

/* Streak fire animation */
.streak-fire {
  animation: breathe 2s ease-in-out infinite;
}

/* Mascot speech bubble entrance */
.speech-enter {
  animation: popIn 0.4s var(--ease-bounce) both;
}
